{"version":3,"sources":["../../../../src/lib/series/AreaOnlySeries.js"],"names":["React","Component","PropTypes","area","d3Area","GenericChartComponent","getAxisCanvas","hexToRGBA","isDefined","first","functor","constants","AreaOnlySeries","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","yAccessor","defined","base","fill","stroke","opacity","interpolation","canvasClip","xScale","yScale","chartConfig","plotData","xAccessor","save","gradient","createLinearGradient","height","addColorStop","fillStyle","strokeStyle","beginPath","newBase","areaSeries","d","x","Math","round","y0","y1","context","curve","restore","style","className","newClassName","concat","propTypes","string","func","isRequired","number","oneOfType","object","bool","defaultProps","isNaN","range"],"mappings":"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","file":"AreaOnlySeries.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { area as d3Area } from \"d3-shape\";\n\nimport GenericChartComponent from \"react-stockcharts/build/lib/GenericChartComponent\";\nimport { getAxisCanvas } from \"react-stockcharts/build/lib/GenericComponent\";\n\nimport { hexToRGBA, isDefined, first, functor } from \"react-stockcharts/build/lib/utils\";\nimport { constants } from \"zlib\";\n\nclass AreaOnlySeries extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { yAccessor, defined, base } = this.props;\n\t\tconst { fill, stroke, opacity, interpolation, canvasClip } = this.props;\n\n\t\tconst {\n\t\t\txScale,\n\t\t\tchartConfig: { yScale },\n\t\t\tplotData,\n\t\t\txAccessor,\n\t\t} = moreProps;\n\n\t\tif (canvasClip) {\n\t\t\tctx.save();\n\t\t\tcanvasClip(ctx, moreProps);\n\t\t}\n\n\t\t// Gradient fill\n\t\tconst gradient = ctx.createLinearGradient(0, 0, 0, moreProps.chartConfig.height);\n\t\tgradient.addColorStop(0.0, hexToRGBA(fill, 0.53));\n\t\tgradient.addColorStop(0.8, hexToRGBA(fill, 0.11));\n\t\tgradient.addColorStop(1.0, hexToRGBA(fill, 0));\n\t\tctx.fillStyle = gradient;\n\n\t\tctx.strokeStyle = stroke;\n\n\t\tctx.beginPath();\n\t\tconst newBase = functor(base);\n\t\tconst areaSeries = d3Area()\n\t\t\t.defined(d => defined(yAccessor(d)))\n\t\t\t.x(d => Math.round(xScale(xAccessor(d))))\n\t\t\t.y0(d => newBase(yScale, d, moreProps))\n\t\t\t.y1(d => Math.round(yScale(yAccessor(d))))\n\t\t\t.context(ctx);\n\n\t\tif (isDefined(interpolation)) {\n\t\t\tareaSeries.curve(interpolation);\n\t\t}\n\t\tareaSeries(plotData);\n\t\tctx.fill();\n\n\t\tif (canvasClip) {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { yAccessor, defined, base, style } = this.props;\n\t\tconst { stroke, fill, className, opacity, interpolation } = this.props;\n\n\t\tconst {\n\t\t\txScale,\n\t\t\tchartConfig: { yScale },\n\t\t\tplotData,\n\t\t\txAccessor,\n\t\t} = moreProps;\n\n\t\tconst newBase = functor(base);\n\t\tconst areaSeries = d3Area()\n\t\t\t.defined(d => defined(yAccessor(d)))\n\t\t\t.x(d => Math.round(xScale(xAccessor(d))))\n\t\t\t.y0(d => newBase(yScale, d, moreProps))\n\t\t\t.y1(d => Math.round(yScale(yAccessor(d))));\n\n\t\tif (isDefined(interpolation)) {\n\t\t\tareaSeries.curve(interpolation);\n\t\t}\n\n\t\tconst d = areaSeries(plotData);\n\t\tconst newClassName = className.concat(isDefined(stroke) ? \"\" : \" line-stroke\");\n\t\treturn (\n\t\t\t<path\n\t\t\t\tstyle={style}\n\t\t\t\td={d}\n\t\t\t\tstroke={stroke}\n\t\t\t\tfill={fill}\n\t\t\t\tclassName={newClassName}\n\t\t\t\tfillOpacity={opacity}\n\t\t\t/>\n\t\t);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<GenericChartComponent\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\t\tdrawOn={[\"pan\"]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nAreaOnlySeries.propTypes = {\n\tclassName: PropTypes.string,\n\tyAccessor: PropTypes.func.isRequired,\n\tstroke: PropTypes.string,\n\tfill: PropTypes.string,\n\topacity: PropTypes.number,\n\tdefined: PropTypes.func,\n\tbase: PropTypes.oneOfType([PropTypes.func, PropTypes.number]),\n\tinterpolation: PropTypes.func,\n\tcanvasClip: PropTypes.func,\n\tstyle: PropTypes.object,\n\tgradient: PropTypes.bool,\n};\n\nAreaOnlySeries.defaultProps = {\n\tclassName: \"line \",\n\tfill: \"none\",\n\topacity: 1,\n\tdefined: d => !isNaN(d),\n\tbase: (yScale /* , d, moreProps */) => first(yScale.range()),\n};\n\nexport default AreaOnlySeries;\n"]}