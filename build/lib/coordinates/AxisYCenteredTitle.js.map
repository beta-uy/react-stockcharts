{"version":3,"sources":["../../../src/lib/coordinates/AxisYCenteredTitle.js"],"names":["AxisYCenteredTitle","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","currentItem","text","renderValue","yAccessor","drawOnCanvas2","context","helper","chartConfig","getYScale","getText","getMouseCanvas","Component","propTypes","displayFormat","PropTypes","func","isRequired","yAxisPad","number","rectWidth","rectHeight","orient","oneOf","at","fill","string","opacity","fontFamily","fontSize","textFill","snapX","bool","className","selectCanvas","oneOfType","textAnchor","rotate","onClick","xAccessor","xScale","yScale","datum","object","x","y","customX","mouseXY","displayXAccessor","coordinate","invert","defaultProps","strokeOpacity","strokeWidth","canvases","bg","contextTypes","canvasOriginX","canvasOriginY","margin","ratio","Array","isArray","undefined","show","height","stroke","rectRadius","fontWeight","edgeAt","type","y1","y2","hideLine","coordinateProps","arrowWidth","x1","x2","save","setTransform","scale","translate","left","top","restore","xPos","yPos","radians","Math","PI","font","fillStyle","textAlign","beginPath","fillText"],"mappings":"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","file":"AxisYCenteredTitle.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getMouseCanvas } from \"../GenericComponent\";\n\nimport { isNotDefined, isDefined, functor, hexToRGBA } from \"../utils\";\n\nimport LabelAnnotation, {\n    defaultProps,\n    helper as labelHelper,\n} from \"../annotation/LabelAnnotation\";\n\nclass AxisYCenteredTitle extends Component {\n    constructor(props) {\n        super(props);\n        this.renderSVG = this.renderSVG.bind(this);\n        this.drawOnCanvas = this.drawOnCanvas.bind(this);\n    }\n    drawOnCanvas(ctx, moreProps) {\n        if (isNotDefined(moreProps.currentItem)) {\n            return null;\n        }\n        const props = {\n            ...this.props,\n            text: this.props.renderValue(this.props.yAccessor(moreProps.currentItem)),\n        };\n        drawOnCanvas2(ctx, props, this.context, moreProps);\n    }\n    renderSVG(moreProps) {\n        const props = helper(this.props, moreProps);\n        if (isNotDefined(props)) return null;\n\n        const { chartConfig } = moreProps;\n\n        return (\n            <LabelAnnotation\n                yScale={getYScale(chartConfig)}\n                {...this.props}\n                text={getText(this.props)}\n            />\n        );\n    }\n\n    render() {\n        return (\n            <GenericChartComponent\n                clip={false}\n                svgDraw={this.renderSVG}\n                canvasDraw={this.drawOnCanvas}\n                canvasToDraw={getMouseCanvas}\n                drawOn={[\"mousemove\", \"pan\", \"drag\"]}\n            />\n        );\n    }\n}\n\nAxisYCenteredTitle.propTypes = {\n    displayFormat: PropTypes.func.isRequired,\n    yAxisPad: PropTypes.number,\n    rectWidth: PropTypes.number,\n    rectHeight: PropTypes.number,\n    orient: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\n    at: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\n    fill: PropTypes.string,\n    opacity: PropTypes.number,\n    fontFamily: PropTypes.string,\n    fontSize: PropTypes.number,\n    textFill: PropTypes.string,\n    snapX: PropTypes.bool,\n    className: PropTypes.string,\n    selectCanvas: PropTypes.func,\n    text: PropTypes.oneOfType([PropTypes.string, PropTypes.func]).isRequired,\n    textAnchor: PropTypes.string,\n    rotate: PropTypes.number,\n    onClick: PropTypes.func,\n    xAccessor: PropTypes.func,\n    yAccessor: PropTypes.func,\n    xScale: PropTypes.func,\n    yScale: PropTypes.func,\n    renderValue: PropTypes.func.isRequired,\n    datum: PropTypes.object,\n    x: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\n    y: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\n};\n\nfunction customX(props, moreProps) {\n    const { xScale, xAccessor, currentItem, mouseXY } = moreProps;\n    const { snapX } = props;\n    const x = snapX ? xScale(xAccessor(currentItem)) : mouseXY[0];\n\n    const { displayXAccessor } = moreProps;\n    const { displayFormat } = props;\n    const coordinate = snapX\n        ? displayFormat(displayXAccessor(currentItem))\n        : displayFormat(xScale.invert(x));\n    return { x, coordinate };\n}\n\nAxisYCenteredTitle.defaultProps = {\n    yAxisPad: 0,\n    rectWidth: 80,\n    rectHeight: 20,\n\n    // rectRadius: 5,\n    // stroke: \"#684F1D\",\n    strokeOpacity: 1,\n    strokeWidth: 1,\n\n    orient: \"bottom\",\n    at: \"bottom\",\n\n    fill: \"#525252\",\n    opacity: 1,\n    fontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n    fontSize: 13,\n    textFill: \"#FFFFFF\",\n    snapX: true,\n    customX: customX,\n\n    ...defaultProps,\n    selectCanvas: canvases => canvases.bg,\n};\n\nAxisYCenteredTitle.contextTypes = {\n    canvasOriginX: PropTypes.number,\n    canvasOriginY: PropTypes.number,\n\n    margin: PropTypes.object.isRequired,\n    ratio: PropTypes.number.isRequired,\n};\n\nfunction getText(props) {\n    return functor(props.text)(props);\n}\n\nfunction getYScale(chartConfig) {\n    return Array.isArray(chartConfig) ? undefined : chartConfig.yScale;\n}\n\nfunction helper(props, moreProps) {\n    const { show, currentItem } = moreProps;\n    const {\n        chartConfig: { height },\n    } = moreProps;\n\n    if (isNotDefined(currentItem)) return null;\n\n    const { customX } = props;\n\n    const { orient, at } = props;\n    const { stroke, strokeOpacity, strokeWidth } = props;\n    const { rectRadius, rectWidth, rectHeight } = props;\n    const { fill, opacity, fontFamily, fontSize, fontWeight, textFill } = props;\n\n    const edgeAt = at === \"bottom\" ? height : 0;\n\n    const { x, coordinate } = customX(props, moreProps);\n\n    const type = \"vertical\";\n    const y1 = 0,\n        y2 = height;\n    const hideLine = true;\n\n    const coordinateProps = {\n        coordinate,\n        show,\n        type,\n        orient,\n        edgeAt,\n        hideLine,\n        fill,\n        opacity,\n        fontFamily,\n        fontSize,\n        fontWeight,\n        textFill,\n        stroke,\n        strokeOpacity,\n        strokeWidth,\n        rectWidth,\n        rectHeight,\n        rectRadius,\n        arrowWidth: 0,\n        x1: x,\n        x2: x,\n        y1,\n        y2,\n    };\n    return coordinateProps;\n}\n\nfunction drawOnCanvas2(ctx, props, context, moreProps) {\n    ctx.save();\n\n    const { canvasOriginX, canvasOriginY, margin, ratio } = context;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.scale(ratio, ratio);\n\n    if (isDefined(canvasOriginX)) ctx.translate(canvasOriginX, canvasOriginY);\n    else ctx.translate(margin.left + 0.5 * ratio, margin.top + 0.5 * ratio);\n\n    drawOnCanvas(ctx, props, moreProps);\n\n    ctx.restore();\n}\n\nfunction drawOnCanvas(ctx, props, moreProps) {\n    const { textAnchor, fontFamily, fontSize, opacity, rotate } = props;\n    const { xScale, chartConfig, xAccessor } = moreProps;\n\n    const { xPos, yPos, fill, text } = labelHelper(\n        props,\n        xAccessor,\n        xScale,\n        getYScale(chartConfig),\n    );\n\n    const radians = rotate / 180 * Math.PI;\n    ctx.save();\n    ctx.translate(xPos, yPos);\n    ctx.rotate(radians);\n\n    ctx.font = `${fontSize}px ${fontFamily}`;\n    ctx.fillStyle = hexToRGBA(fill, opacity);\n    ctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\n\n    ctx.beginPath();\n    ctx.fillText(text, 0, 0);\n    ctx.restore();\n}\n\nexport default AxisYCenteredTitle;\n"]}